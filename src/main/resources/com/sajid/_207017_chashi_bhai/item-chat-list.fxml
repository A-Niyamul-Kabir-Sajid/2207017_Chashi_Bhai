<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>

<HBox xmlns:fx="http://javafx.com/fxml" xmlns="http://javafx.com/javafx/25"
    fx:controller="com.sajid._207017_chashi_bhai.controllers.ChatListItemController"
    spacing="15" styleClass="chat-list-item" alignment="CENTER_LEFT" onMouseClicked="#onChatClick">
    <padding>
        <Insets top="12" bottom="12" left="20" right="20"/>
    </padding>
    
    <!-- User Avatar with Online Status -->
    <StackPane>
        <ImageView fx:id="userAvatar" fitWidth="55" fitHeight="55" preserveRatio="true" styleClass="avatar-medium"/>
        <!-- Online/Offline indicator -->
        <HBox alignment="BOTTOM_RIGHT">
            <padding>
                <Insets bottom="2" right="2"/>
            </padding>
            <Region fx:id="onlineIndicator" prefWidth="12" prefHeight="12" styleClass="online-indicator" visible="false"/>
        </HBox>
    </StackPane>
    
    <!-- Chat Info -->
    <VBox spacing="4" HBox.hgrow="ALWAYS">
        <HBox spacing="8" alignment="CENTER_LEFT">
            <Label fx:id="lblUserName" text="à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€à¦° à¦¨à¦¾à¦®" styleClass="chat-user-name"/>
            <Label fx:id="lblUserRole" text="à¦•à§ƒà¦·à¦•" styleClass="chat-user-role"/>
            <Label fx:id="lblVerified" text="âœ“" styleClass="verified-badge" visible="false"/>
        </HBox>

        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label fx:id="lblUserId" text="ID: 0" styleClass="chat-meta" style="-fx-font-size: 11px; -fx-text-fill: #777;"/>
            <Label fx:id="lblUserPhone" text="ðŸ“± 01XXXXXXXXX" styleClass="chat-meta" style="-fx-font-size: 11px; -fx-text-fill: #777;"/>
        </HBox>
        
        <Label fx:id="lblLastMessage" text="à¦¶à§‡à¦· à¦¬à¦¾à¦°à§à¦¤à¦¾..." styleClass="chat-last-message" maxWidth="400" wrapText="false"/>
        
        <HBox spacing="8" alignment="CENTER_LEFT">
            <Label fx:id="lblCropName" text="à¦«à¦¸à¦²: à¦§à¦¾à¦¨" styleClass="chat-crop-name" visible="true"/>
        </HBox>
    </VBox>
    
    <!-- Right Side - Time and Badge -->
    <VBox spacing="8" alignment="TOP_RIGHT" minWidth="80">
        <Label fx:id="lblTime" text="à§§à§¦:à§©à§¦ AM" styleClass="chat-time"/>
        
        <!-- Unread badge -->
        <StackPane fx:id="unreadBadge" styleClass="unread-badge" visible="false">
            <Label fx:id="lblUnreadCount" text="3" styleClass="unread-count"/>
        </StackPane>
        
        <!-- Message status (for sent messages) -->
        <Label fx:id="lblStatus" text="âœ“âœ“" styleClass="message-status" visible="false"/>
    </VBox>
    
</HBox>
