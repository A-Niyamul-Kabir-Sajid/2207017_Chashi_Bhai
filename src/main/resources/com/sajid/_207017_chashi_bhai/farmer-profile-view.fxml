<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane minWidth="1024" styleClass="root" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/25" fx:controller="com.sajid._207017_chashi_bhai.controllers.FarmerProfileController">
    
    <!-- Top Navigation -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="nav-bar">
            <padding>
                <Insets bottom="15" left="20" right="20" top="15" />
            </padding>
            <Button fx:id="btnBack" onAction="#onBack" styleClass="back-button" text="â†" />
            <Label styleClass="app-title" text="ðŸŒ¾ à¦šà¦¾à¦·à§€ à¦­à¦¾à¦‡" />
            <Region HBox.hgrow="ALWAYS" />
            <ProgressIndicator fx:id="progressIndicator" prefHeight="24" prefWidth="24" visible="false" />
            <Button onAction="#onRefresh" style="-fx-font-size: 16px;" styleClass="button-secondary" text="ðŸ”„" />
            <Button fx:id="btnEditProfile" onAction="#onEditProfile" styleClass="button-secondary" text="âœŽ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾" />
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" styleClass="scroll-pane">
            <VBox alignment="TOP_CENTER" spacing="30" styleClass="profile-container">
                <padding>
                    <Insets bottom="40" left="40" right="40" top="30" />
                </padding>

                <!-- Last Updated Info -->
                <Label fx:id="lblLastUpdated" style="-fx-text-fill: #888; -fx-font-size: 11px;" styleClass="info-text" text="" />

                <!-- Profile Header Card -->
                <VBox alignment="CENTER" spacing="15" styleClass="card, profile-header">
                    <padding>
                        <Insets bottom="30" left="40" right="40" top="30" />
                    </padding>
                    
                    <!-- Profile Photo -->
                    <StackPane alignment="CENTER">
                        <Circle radius="70" styleClass="profile-photo-border" />
                        <ImageView fx:id="imgProfilePhoto" fitHeight="140" fitWidth="140" preserveRatio="false">
                            <clip>
                                <Circle radius="70" centerX="70" centerY="70"/>
                            </clip>
                            <image>
                                <!-- Placeholder will be set in controller -->
                            </image>
                        </ImageView>
                        <Button fx:id="btnChangeProfilePhoto" text="ðŸ“·" onAction="#onChangeProfilePhoto"
                                styleClass="button-secondary" StackPane.alignment="TOP_RIGHT"
                                style="-fx-background-radius: 18; -fx-min-width: 36; -fx-min-height: 36; -fx-max-width: 36; -fx-max-height: 36; -fx-padding: 0; -fx-cursor: hand;" >
                            <StackPane.margin>
                                <Insets top="6" right="6" />
                            </StackPane.margin>
                        </Button>
                    </StackPane>

                    <!-- Name & Verified Badge -->
                    <VBox alignment="CENTER" spacing="8">
                        <Label fx:id="lblFarmerName" styleClass="profile-name" text="à¦•à§ƒà¦·à¦•à§‡à¦° à¦¨à¦¾à¦®" />
                        <HBox alignment="CENTER" spacing="8">
                            <Label fx:id="lblVerifiedBadge" styleClass="verified-badge" text="âœ“" />
                            <Label styleClass="verified-text" text="à¦¯à¦¾à¦šà¦¾à¦‡à¦•à§ƒà¦¤ à¦•à§ƒà¦·à¦•" />
                        </HBox>
                    </VBox>

                    <!-- Contact Info -->
                    <VBox alignment="CENTER" spacing="8">
                        <HBox alignment="CENTER" spacing="8">
                            <Label styleClass="info-icon" text="ðŸ†”" />
                            <Label fx:id="lblUserId" styleClass="info-text" text="ID: 0000" />
                            <Button fx:id="btnCopyId" onAction="#onCopyUserId" style="-fx-font-size: 12px; -fx-padding: 2 8;" styleClass="button-transparent" text="ðŸ“‹" />
                        </HBox>
                        <HBox alignment="CENTER" spacing="8">
                            <Label styleClass="info-icon" text="ðŸ“±" />
                            <Label fx:id="lblPhone" styleClass="info-text" text="+88017XXXXXXXX" />
                        </HBox>
                        <HBox alignment="CENTER" spacing="8">
                            <Label styleClass="info-icon" text="ðŸ“" />
                            <Label fx:id="lblDistrict" styleClass="info-text" text="à¦œà§‡à¦²à¦¾" />
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Stats Cards -->
                <FlowPane hgap="20" vgap="20" alignment="CENTER" maxWidth="920">
                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" prefWidth="280" prefHeight="140">
                        <padding>
                            <Insets bottom="20" left="30" right="30" top="20" />
                        </padding>
                        <Label fx:id="lblYearsFarming" styleClass="stat-value" text="0" />
                        <Label styleClass="stat-label" text="à¦¬à¦›à¦° à¦šà¦¾à¦·à¦¾à¦¬à¦¾à¦¦" />
                        <Label styleClass="stat-sublabel" text="Years Farming" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" prefWidth="280" prefHeight="140">
                        <padding>
                            <Insets bottom="20" left="30" right="30" top="20" />
                        </padding>
                        <Label fx:id="lblTotalSales" styleClass="stat-value" text="à§³0.00" />
                        <Label styleClass="stat-label" text="à¦®à§‹à¦Ÿ à¦¬à¦¿à¦•à§à¦°à¦¯à¦¼" />
                        <Label styleClass="stat-sublabel" text="Total Sales" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="8" styleClass="stat-card" prefWidth="280" prefHeight="140">
                        <padding>
                            <Insets bottom="20" left="30" right="30" top="20" />
                        </padding>
                        <HBox alignment="CENTER" spacing="5">
                            <Label fx:id="lblRating" styleClass="stat-value" text="0.0" />
                            <Label styleClass="stat-icon-small" />
                        </HBox>
                        <Label styleClass="stat-label" text="à¦°à§‡à¦Ÿà¦¿à¦‚" />
                        <Label styleClass="stat-sublabel" text="Rating" />
                    </VBox>
                </FlowPane>

                <!-- Farm Photos Section -->
                <VBox spacing="15" styleClass="section-container">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label styleClass="section-title" text="à¦–à¦¾à¦®à¦¾à¦°à§‡à¦° à¦›à¦¬à¦¿ / Farm Photos" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="btnUploadFarmPhoto" onAction="#onUploadFarmPhoto" styleClass="button-secondary" text="+ à¦›à¦¬à¦¿ à¦¯à§‹à¦— à¦•à¦°à§à¦¨" />
                    </HBox>
                    
                    <ScrollPane fitToHeight="true" hbarPolicy="AS_NEEDED" styleClass="photo-scroll" vbarPolicy="NEVER">
                        <HBox fx:id="hboxFarmPhotos" alignment="CENTER_LEFT" minHeight="180" spacing="15">
                            <!-- Farm photos with delete buttons will be added dynamically -->
                        </HBox>
                    </ScrollPane>
                    <Label fx:id="lblNoPhotos" styleClass="info-text" text="à¦•à§‹à¦¨à§‹ à¦–à¦¾à¦®à¦¾à¦°à§‡à¦° à¦›à¦¬à¦¿ à¦¨à§‡à¦‡à¥¤ à¦›à¦¬à¦¿ à¦¯à§‹à¦— à¦•à¦°à¦¤à§‡ à¦‰à¦ªà¦°à§‡à¦° à¦¬à§‹à¦¤à¦¾à¦®à§‡ à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨à¥¤" visible="false" />
                </VBox>

                <!-- Logout Button -->
                <VBox alignment="CENTER" spacing="10" styleClass="logout-section">
                    <Button fx:id="btnLogout" onAction="#onLogout" prefHeight="45" prefWidth="300" styleClass="button-danger" text="ðŸšº à¦²à¦—à¦†à¦‰à¦Ÿ / Logout" />
                    <Label styleClass="logout-hint-text" text="à¦†à¦ªà¦¨à¦¾à¦° à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¥à§‡à¦•à§‡ à¦¸à¦¾à¦‡à¦¨ à¦†à¦‰à¦Ÿ à¦•à¦°à§à¦¨" />
                </VBox>

            </VBox>
        </ScrollPane>
    </center>
    
</BorderPane>
